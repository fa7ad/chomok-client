{"version":3,"sources":["pages/_admin/Partners.js"],"names":["AdminZones","state","zones","loading","listStyle","textAlign","listMapper","item","idx","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_6__","Item","actions","antd__WEBPACK_IMPORTED_MODULE_7__","onClick","_this","showItem","type","deleteItem","_id","Meta","title","getItemTitle","description","getItemDesc","style","antd__WEBPACK_IMPORTED_MODULE_8__","color","name","business","e","console","log","id","fetch","method","credentials","then","res","json","_ref","ok","Error","setState","p","slice","splice","catch","error","this","itemLayout","dataSource","renderItem","_this2","r","status","navigate","_ref2","data","React","PureComponent"],"mappings":"gMAIMA,6MACJC,MAAQ,CACNC,MAAO,GACPC,SAAS,KAGXC,UAAY,CACVC,UAAW,UA6BbC,WAAa,SAACC,EAAMC,GAAP,OACXC,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAN,CACEC,QAAS,CACPL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAASC,EAAKC,SAASX,GAAOY,KAAK,WAA3C,QAGAV,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAASC,EAAKG,WAAWb,EAAKc,IAAKb,GAAMW,KAAK,UAAtD,aAIFV,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAKS,KAAX,CACEC,MAAON,EAAKO,aAAajB,GACzBkB,YAAaR,EAAKS,YAAYnB,GAC9BoB,MAAOV,EAAKb,gBAKlBoB,aAAe,SAAAjB,GAAI,OACjBE,EAAAC,EAAAC,cAACiB,EAAA,EAAD,CAAKC,MAAM,OACTpB,EAAAC,EAAAC,cAAA,kBADF,IACgBJ,EAAKuB,SAIvBJ,YAAc,SAAAnB,GAAI,OAChBE,EAAAC,EAAAC,cAACiB,EAAA,EAAD,CAAKC,MAAM,QACTpB,EAAAC,EAAAC,cAAA,sBADF,IACoBJ,EAAKwB,SAASD,SAIpCZ,SAAW,SAAAX,GAAI,OAAI,SAAAyB,GACjBC,QAAQC,IAAI3B,OAGda,WAAa,SAACe,EAAI3B,GAAL,OAAa,SAAAwB,GACxBI,MAAM,cAAgBD,EAAI,CACxBE,OAAQ,SACRC,YAAa,YAEZC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GACJ,IADgBA,EAATC,GAQL,MAAM,IAAIC,MAAM,wBANhB3B,EAAK4B,SAAS,SAAAC,GACZ,IAAM5C,EAAQ4C,EAAE5C,MAAM6C,QAEtB,OADA7C,EAAM8C,OAAOxC,EAAK,GACX,CAAEN,aAMd+C,MAAM,SAAAjB,GACLC,QAAQiB,MAAMlB,+EA7ElB,OACEvB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACET,QAASgD,KAAKlD,MAAME,QACpBiD,WAAW,aACXC,WAAYF,KAAKlD,MAAMC,MACvBoD,WAAYH,KAAK7C,yDAKF,IAAAiD,EAAAJ,KACnBf,MAAM,qBAAsB,CAAEE,YAAa,YACxCC,KAAK,SAAAiB,GAEJ,OADiB,MAAbA,EAAEC,QAAgBC,YAAS,UACxBF,EAAEf,SAEVF,KAAK,SAAAoB,GAAyB,IAAtBhB,EAAsBgB,EAAtBhB,GAAUzC,EAAYyD,EAAlBC,KACX,IAAKjB,EAAI,MAAM,IAAIC,MAAM,wBACzBW,EAAKV,SAAS,CAAE3C,QAAOC,SAAS,MAEjC8C,MAAM,SAAAjB,GACLC,QAAQiB,MAAMlB,YAhCG6B,IAAMC,eA6FhB9D","file":"static/js/13.27124f08.chunk.js","sourcesContent":["import React from 'react'\nimport { List, Button, Tag } from 'antd'\nimport { navigate } from '@reach/router'\n\nclass AdminZones extends React.PureComponent {\n  state = {\n    zones: [],\n    loading: true\n  }\n\n  listStyle = {\n    textAlign: 'left'\n  }\n\n  render () {\n    return (\n      <List\n        loading={this.state.loading}\n        itemLayout='horizontal'\n        dataSource={this.state.zones}\n        renderItem={this.listMapper}\n      />\n    )\n  }\n\n  componentDidMount () {\n    fetch('/api/users/partner', { credentials: 'include' })\n      .then(r => {\n        if (r.status === 401) navigate('/login')\n        return r.json()\n      })\n      .then(({ ok, data: zones }) => {\n        if (!ok) throw new Error('Something went wrong')\n        this.setState({ zones, loading: false })\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n\n  listMapper = (item, idx) => (\n    <List.Item\n      actions={[\n        <Button onClick={this.showItem(item)} type='primary'>\n          View\n        </Button>,\n        <Button onClick={this.deleteItem(item._id, idx)} type='danger'>\n          DELETE!\n        </Button>\n      ]}>\n      <List.Item.Meta\n        title={this.getItemTitle(item)}\n        description={this.getItemDesc(item)}\n        style={this.listStyle}\n      />\n    </List.Item>\n  )\n\n  getItemTitle = item => (\n    <Tag color='red'>\n      <b>Name:</b> {item.name}\n    </Tag>\n  )\n\n  getItemDesc = item => (\n    <Tag color='blue'>\n      <b>Business:</b> {item.business.name}\n    </Tag>\n  )\n\n  showItem = item => e => {\n    console.log(item)\n  }\n\n  deleteItem = (id, idx) => e => {\n    fetch('/api/users/' + id, {\n      method: 'DELETE',\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then(({ ok }) => {\n        if (ok) {\n          this.setState(p => {\n            const zones = p.zones.slice()\n            zones.splice(idx, 1)\n            return { zones }\n          })\n        } else {\n          throw new Error('Something went wrong')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n}\n\nexport default AdminZones\n"],"sourceRoot":""}